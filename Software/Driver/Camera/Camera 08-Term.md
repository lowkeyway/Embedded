# 单Pixel的CMOS工作原理

图像传感器的工作原理基于光电效应，将光子转换为电荷。不同于CCD传感器（电荷耦合器件），CMOS传感器（互补金属氧化物半导体）可以直接将像元中的电荷转换为电压，此电压经放大和量化后最终变成输出的数字灰度值（DN）。

现代CMOS传感器凭借高帧率和出色的图像质量从同类产品中脱颖而出。高性能工业相机中的CMOS传感器可实现精确的图像分析，因此在很多应用中，CCD传感器都已被不断进步的CMOS技术所替代。

CMOS传感器的基本功能与主要特性如下图所示：

<img src="https://github.com/lowkeyway/Embedded/blob/master/Software/Driver/Pic/Camera/Term/Camera%2008-Term%20%E5%8D%95%E4%B8%AASensor%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.jpg">
<img src="https://github.com/lowkeyway/Embedded/blob/master/Software/Driver/Pic/Camera/Term/Camera%2008-Term%20%E5%9B%BE%E5%83%8F%E4%BC%A0%E6%84%9F%E5%99%A8-%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%89%A9%E7%90%86%E6%A8%A1%E5%9E%8B.jpg">

+ 1、满阱容量 [e–] 与饱和容量 [e–]
将一个像元想象成一个阱，那么满阱容量就是阱中可以储存的最大电子数，与之相对应的是产生这些电子的最大光子数（即饱和照度）。饱和容量通过不同的相机图像直接测得，实际上用于描述相机特性。饱和容量通常小于满阱容量。如果对比图像传感器数据和相机数据，上述差异可能会造成争议。高饱和容量可实现更长的曝光时间。如果某个像元过曝，像元的DN值被设置成最大并且不包含有用信息。

 
+ 2、绝对灵敏度阈值（AST）[e–]
绝对灵敏度阈值用于描述相机能够将照片中的有用图像信息从噪声中区别出来所需要的最少光子数（即最小可检测照度）。这意味着阈值越低，相机灵敏度越高。在极低光照应用中，应将绝对灵敏度阈值考虑在内。这比仅仅参考量子效率（QE）更有意义，因为绝对灵敏度结合了量子效率、暗噪声以及因光子的量子特性而造成的散粒噪声。绝对灵敏度阈值可用信噪比（SNR）来定义，即为满足SNR=1（信号等同于噪声）时的光子数均值。
 
+ 3、颞暗噪声[e–]
即便传感器处于没有光照的情况下，每个像元也能生成一个（暗）信号。随着曝光时间延长以及温度升高，每个像元在无光条件下都会产生电子。这种暗信号被称为“暗噪声”（单位为e–），它并不是一个固定值。大部分应用都倾向于低暗噪。暗噪声、散粒噪声及量化噪声便构成了相机的噪声。
 
+ 4、动态范围 [dB]
动态范围（DR）是饱和照度与最小可检测照度的比值，单位为dB。如果图像中同时存在黑暗和明亮区域，具有高动态范围的相机可以提供更详细的信息。因此，在涉及此类图像或者光照条件快速变化的应用中，高动态范围尤其重要。

+ 5、量子效率[%]
图像传感器将光子转换为电子，其转换效率（或量子效率）取决于波长。传感器的光电转换效率越高，其感光度就越高，图像能够提供的信息也更多。相机的测量值与图像传感器的供应商数据可能有所不同，因为相机可能会使用玻璃盖或滤光镜。
 
+ 6、最大信噪比（SNRmax）[dB]
信噪比是（经暗场校正后的）灰度值与信号噪声的比值，单位通常为dB，主要取决于增益K和暗噪声。信噪比随光子数的增加而增加，在饱和照度下达到最大值（SNRmax）。
 
+ 7、增益K（DN/e–）
相机将图像传感器中的电子（e–）转换为数字灰度值（DN）。这一转换过程可通过系统总增益K来描述，单位为“DN/e–”，即灰度每提高1个DN需要转换K个电子，而K值取决于相机的设计。增益K的小幅增加可能提高线性度，同时牺牲饱和容量。
