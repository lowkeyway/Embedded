# #address-cells and #size-cells

#address-cells表示用几个cell表示地址，#size-cells表示用几个cell表示地址长度.
## Example 1
```
/ {
    #address-cells = <0x1>; //在 root node下使用1个u32来代表address。
    #size-cells = <0x0>; // 在root node下使用0个u32来代表size。
    ...
    ...
    memory {        // memory device
        ...
        reg = <0x90000000>;
            // 0x90000000是存取memory的address
        ...
    };
    ...
    ...
}
```

## Example2

```
/ {
    #address-cells = <0x1>; //在root node下使用1个u32来代表address。
    #size-cells = <0x1>; //在root node下使用1个u32来代表size。
    ...
    ...
    memory { // memory device
        ...
        reg = <0x90000000 0x800000>;
            // 0x90000000 是存取 memory 的 address
            // 0x800000 是 memory 的 size。
        ...
    };
    ...
    ...
}
```

## Example3

```
/ {
    #address-cells = <0x2>; // 在root node下使用2个u32来代表address。
    #size-cells = <0x1>; // 在root node下使用1个u32来代表size。
    ...
    ...
    memory { // memory device
        ...
        reg = <0x90000000 00000000 0x800000>;
            // 0x90000000 00000000 是存取memory的address, 64bit.
            // 0x800000 是memory的size。
        ...
    };
    ...
    ...
}
```


## Example4

```
/ {
    #address-cells = <0x2>; // 在root node下使用2个u32来代表address。
    #size-cells = <0x2>; // 在root node下使用2个u32来代表size。
    ...
    ...
    memory { // memory device
        ...
        reg = <0x90000000 00000000 0x800000 00000000>;
            // 0x90000000 00000000 是存取memory的address, 64bit.
            // 0x800000 00000000 是memory的size。64bit.
        ...
    };
    ...
    ...
}
```

# reg

## Property name: 
reg

## Property value: 
\<prop-encoded-array\> encoded as an arbitrary number of (address, length) pairs.
    
## Description:
The reg property describes the address of the device’s resources within the address space defined by its parent bus. Most commonly this means the offsets and lengths of memory-mapped IO register blocks, but may have a different meaning on some bus types. Addresses in the address space defined by the root node are CPU real

## addresses.
The value is a \<prop-encoded-array\>, composed of an arbitrary number of pairs of address and length,\<address length\>. The number of \<u32\> cells required to specify the address and length are bus-specific and are specified by the #address-cells and #size-cells properties in the parent of the device node. If the parent node specifies a value of 0 for #size-cells, the length field in the value of reg shall be omitted.

## Example:
Suppose a device within a system-on-a-chip had two blocks of registers, a 32-byte block at offset 0x3000 in the SOC and a 256-byte block at offset 0xFE00. The reg property would be encoded as follows (assuming #address-cells and #size-cells values of 1):
    reg = \<0x3000 0x20 0xFE00 0x100\>;


+ 每个可寻址的设备有一个reg属性，即以下面形式表示的元组列表：reg = <address1 length1 [address2 length2] [address3 length3] … >
+ 按照惯例，如果一个节点有reg属性，则节点名称必须包含unit-address属性，unit-address属性值是reg属性中的第一个地址值。


# ranges

## Property name: 
ranges

## Value type: 
\<empty\> or \<prop-encoded-array\> encoded as an arbitrary number of (child-bus-address, parentbus-address, length) triplets.

## Description:
The ranges property provides a means of defining a mapping or translation between the address space of the bus (the child address space) and the address space of the bus node’s parent (the parent address space).
The format of the value of the ranges property is an arbitrary number of triplets of (child-bus-address, parentbus-address, length)
+ The child-bus-address is a physical address within the child bus’ address space. The number of cells to represent the address is bus dependent and can be determined from the #address-cells of this node (the node in which the ranges property appears).

+ The parent-bus-address is a physical address within the parent bus’ address space. The number of cells to represent the parent address is bus dependent and can be determined from the #address-cells property of the node that defines the parent’s address space.
+ The length specifies the size of the range in the child’s address space. The number of cells to represent the size can be determined from the #size-cells of this node (the node in which the ranges property appears).

If the property is defined with an \<empty\> value, it specifies that the parent and child address space is identical, and no address translation is required.
If the property is not present in a bus node, it is assumed that no mapping exists between children of the node and the parent address space.

Address Translation Example:
```
soc {
compatible = "simple-bus";
#address-cells = <1>;
#size-cells = <1>;
ranges = <0x0 0xe0000000 0x00100000>;
serial@4600 {
device_type = "serial";
compatible = "ns16550";
reg = <0x4600 0x100>;
clock-frequency = <0>;
interrupts = <0xA 0x8>;
interrupt-parent = <&ipic>;
};
};
```
The soc node specifies a ranges property of
    \<0x0 0xe0000000 0x00100000\>;
This property value specifies that for a 1024 KB range of address space, a child node addressed at physical 0x0 maps to a parent address of physical 0xe0000000. With this mapping, the serial device node can be addressed by a load or store at address 0xe0004600, an offset of 0x4600 (specified in reg) plus the 0xe0000000 mapping specified in ranges.
